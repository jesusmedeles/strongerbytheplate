<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nutritional Foods | Stronger by the Plate</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700&display=swap" rel="stylesheet">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Header -->
  <header>
    <div class="header-container">
      <img src="images/logo.svg" alt="Stronger by the Plate Logo" class="site-logo" />
      <nav aria-label="Main Navigation">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="nutritional-foods.html" class="active">Nutritional Foods</a>
        <a href="workouts.html">Workouts</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-content">
      <h1>Nourish Your Body, Fuel Your Life</h1>
      <p>Explore alkaline-leaning, plant-based foods that energize your mind, body, and spirit.</p>
    </div>
  </section>

  <!-- Alkaline Foods -->
  <section class="mission">
    <div class="mission-text">
      <h2>Top Alkaline Foods & Benefits</h2>
      <p>Discover hydrating, mineral-rich foods that help restore balance, reduce inflammation, and boost energy ‚Äî all part of the foundation for a longer, healthier life.</p>
    </div>
    <img src="images/foodcommunity.jpg" alt="Healthy plant-based foods" />
  </section>

  <!-- Nutrition Videos -->
  <section class="resources">
    <h2>Nutrition Education Videos üçè</h2>
    <div class="resource-grid">
      <article>
        <h3>The Blue Zones üåç</h3>
        <iframe width="100%" height="250" src="https://www.youtube.com/embed/h9cC-8v8NIE" title="The Blue Zones - National Geographic" loading="lazy" allowfullscreen></iframe>
      </article>

      <article>
        <h3>Secrets of the Blue Zones</h3>
        <iframe width="100%" height="250" src="https://www.youtube.com/embed/wsOL5nKO6c0" title="Secrets of the Blue Zones" loading="lazy" allowfullscreen></iframe>
      </article>

      <article>
        <h3>Top 10 Alkaline Foods ü•¶</h3>
        <iframe width="100%" height="250" src="https://www.youtube.com/embed/ta6HJiDGotE" title="Top 10 Alkaline Foods" loading="lazy" allowfullscreen></iframe>
      </article>

      <article>
        <h3>Benefits of Alkaline Foods</h3>
        <iframe width="100%" height="250" src="https://www.youtube.com/embed/66VdylXI0nQ" title="Benefits of Alkaline Foods" loading="lazy" allowfullscreen></iframe>
      </article>
    </div>
  </section>

  <!-- Recipe API -->
  <section class="resources">
    <h2>Today‚Äôs Vegetarian Recipe (Alkaline-Leaning) ü•í</h2>
    <p class="muted">We favor leafy greens, herbs, cucumber, broccoli, avocado, lemon‚Äîand avoid dairy/eggs.</p>
    <div class="row" style="text-align:center;margin-top:1rem;">
      <button id="recipeBtn" class="cta-btn" type="button">Find a Recipe</button>
      <small id="recipeStatus" class="muted" style="display:block;margin-top:.5rem;">Idle</small>
    </div>
    <div id="recipeCard" class="card" aria-live="polite" style="margin-top:2rem;text-align:left;">
      <p class="muted">Tap the button to load a recipe.</p>
    </div>
    <p class="tiny muted" style="text-align:center;margin-top:1rem;">
      Source: <a href="https://www.themealdb.com/api.php" target="_blank" rel="noopener">TheMealDB</a> (no key).
    </p>
  </section>

  <!-- Footer -->
  <footer>
    <p>¬© 2025 Stronger by the Plate</p>
  </footer>

  <!-- Recipe Script -->
  <script>
    const recipeBtn = document.getElementById('recipeBtn');
    const recipeCard = document.getElementById('recipeCard');
    const recipeStatus = document.getElementById('recipeStatus');

    const preferIncl = ['spinach','kale','arugula','romaine','parsley','cilantro','basil','mint','dill','cucumber','broccoli','zucchini','celery','avocado','lemon','lime','ginger'];
    const avoid = ['cheese','cream','milk','butter','yogurt','egg'];
    const norm = s => (s||'').toLowerCase().trim();

    function scoreMeal(meal) {
      const ings = [];
      for (let i = 1; i <= 20; i++) {
        const ing = norm(meal[`strIngredient${i}`]);
        if (ing) ings.push(ing);
      }
      if (ings.some(i => avoid.some(b => i.includes(b)))) return -10;
      let score = 0;
      for (const ing of ings) if (preferIncl.some(p => ing.includes(p))) score++;
      return score;
    }

    async function fetchVegList() {
      const res = await fetch('https://www.themealdb.com/api/json/v1/1/filter.php?c=Vegetarian');
      const data = await res.json();
      return data.meals || [];
    }

    async function fetchMeal(id) {
      const res = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`);
      const data = await res.json();
      return data.meals?.[0] || null;
    }

    async function getRecipe() {
      recipeBtn.disabled = true;
      recipeStatus.textContent = 'Fetching...';
      recipeCard.innerHTML = '<p>Loading recipe...</p>';
      try {
        const list = await fetchVegList();
        let best = null;
        for (let i = 0; i < 5; i++) {
          const pick = list[Math.floor(Math.random() * list.length)];
          const meal = await fetchMeal(pick.idMeal);
          if (!meal) continue;
          const score = scoreMeal(meal);
          if (!best || score > best.score) best = { meal, score };
        }
        const m = best.meal;
        const ings = [];
        for (let i = 1; i <= 10; i++) {
          const ing = m[`strIngredient${i}`];
          const mea = m[`strMeasure${i}`];
          if (ing) ings.push(`${mea || ''} ${ing}`.trim());
        }
        recipeCard.innerHTML = `
          <h3>${m.strMeal}</h3>
          <img src="${m.strMealThumb}" alt="${m.strMeal}" style="border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.1);margin:1rem 0;">
          <p><strong>Ingredients:</strong></p>
          <ul>${ings.map(i=>`<li>${i}</li>`).join('')}</ul>
          <p><a href="${m.strSource || `https://www.themealdb.com/meal/${m.idMeal}`}" target="_blank" rel="noopener">View full recipe ‚Üí</a></p>
        `;
        recipeStatus.textContent = 'Success';
      } catch(e) {
        recipeCard.innerHTML = '<p>Sorry‚Äîcould not load recipe. Please try again.</p>';
        recipeStatus.textContent = 'Error';
      } finally {
        recipeBtn.disabled = false;
      }
    }

    recipeBtn.addEventListener('click', getRecipe);
  </script>
</body>
</html>
